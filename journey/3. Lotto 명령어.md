# 3. Lotto 명령어

벌써 세 번째 문서에 오셨네요.

작심삼일이라는 말이 있죠?

지금까지 분량이 너무 많아서 지금이 3일째가 아니려나요..?ㅎㅎ;;

아무튼, 차근차근 가다보면 어느새 나만의 멋진 봇이 만들어질 겁니다!

오늘도 자신을 위해서 달려가고 있는 여러분들을 응원합니다.

---

[지난 문서](./2.%20Ping-Pong%20명령어.md)에서 다음에는 "입력을 받아서 출력"하는 명령어와,

"명령어가 2개 이상일 땐 어떻게 처리해야 하는지"를 다루겠다고 했습니다.

단순히 "입력 > 출력"만 하면 재미 없으니까, 어떻게 만들어볼까 고민하다가.. 로또 시스템을 직접 만들어보려고 해요.

**오늘도 지난 문서처럼 딱! 딱! 포인트만 짚으면서 넘어갑니다!**

준비 되셨다면! 바로 스따뜨!


---

## 🎫 로또란?

1부터 45까지 숫자 중, 6개의 숫자를 중복없이 랜덤으로 선택해야 합니다.

이때, 사용자는 수동으로 직접 번호를 선택할 수도, 자동으로 무작위 숫자를 선택할 수 있습니다.

그리고, 로또의 당첨 숫자 중 나머지 숫자에서 1개의 숫자를 보너스번호로 자동으로 선택이 되는데, 사용자가 직접 고르지 않습니다.

1등은 사용자가 선택한 6개의 번호가 모두 일치할 때,

2등은 사용자가 선택한 5개의 번호와 보너스번호가 일치할 때,

3등은 사용자가 선택한 5개의 번호가 일치할 때,

4등은 사용자가 선택한 4개의 번호가 일치할 때,

5등은 사용자가 선택한 3개의 번호가 일치할 때이고,

1등 ~ 3등은 판매액과 당첨자 수에 따라 당첨금이 달라지고,

4등은 5만원으로, 5등은 5천원으로 금액이 정해져 있습니다.

일단, 금액은 이번 문서에서는 구현하지 않을 예정입니다.

명령어의 포맷은 아래처럼 할 예정입니다.

입력: `/lotto [자동/6개의 숫자 입력]`

출력

```
입력한 번호(자동/수동일 경우엔 표시 안 함): OO OO OO OO OO OO
당첨 번호: OO OO OO OO OO OO + (보너스 숫자)
등수: O등 당첨! (O개 + 보너스 번호 일치 여부 / 혹은 "꽝!")
```

---

## 🗂️ 파일 구조

보통 간단하게 프로그램을 만든다면, 하나의 파일안에 다 때려박을 수도 있고,

[`ping.go`](./2.%20Ping-Pong%20명령어.md)처럼 하나의 명령어 파일에 때려박을수도 있습니다.

하지만, 프로젝트가 커지고, 협업하게 되고, 유지보수가 필요할 경우, 보통 파일별로 기능을 나누게 됩니다.

아래와 같은 기준으로 분리하면, 명령어가 여러 개일 때도 각 기능별로 코드가 잘 정리되고,

하나의 파일이 지나치게 커지는 문제를 예방할 수 있습니다.

~~또한, 실무에서 쌍욕을 안 먹을 수 있습니다ㅎ~~

`main.go`
- 프로그램의 **진입점** 역할로, **main함수는 항상 최대한 간단하게 유지**하는 게 좋습니다. 
- 환경설정, 세션 생성, 핸들러 등록 등만 담당하고, 실제 명령어 처리/분기는 `commands/core.go` 에서 처리합니다.

`commands/core.go`
- [`ping.go`](./2.%20Ping-Pong%20명령어.md)에서 만들었던 `OnInteractionCreate` 등 이벤트 핸들러를 처리해, 명령어 이름별로 분기합니다.
- 이 파일에서 각 명령어별 함수를 호출하게 됩니다.
- 즉, 핵심 분기와 핸들러를 별도 파일로 분리하게 됩니다.

`commands/ping.go`, `commands/lotto.go`
- 각 명령어의 실제 처리 로직만 담당합니다.
- 즉, 명령어별 파일을 분리하게 됩니다.

---