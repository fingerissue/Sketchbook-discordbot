# 2. Ping-Pong ëª…ë ¹ì–´

ë²Œì¨ ë‘ ë²ˆì§¸ ë¬¸ì„œì— ì˜¤ì…¨ë„¤ìš”. ì²« ë§Œë‚¨ì€ ê·¸ì € ì†ë‹˜ì´ì—ˆì§€ë§Œ, ë‘ ë²ˆì§¸ ë§Œë‚¨ë¶€í„°ëŠ” **í•œ ë°°ë¥¼ ê°™ì´ íƒ„ ìš´ëª…**ì…ë‹ˆë‹¤.

ì´ì™• ì˜¤ì‹  ê¹€ì—, ëê¹Œì§€ ê°€ì„œ, ìš°ë¦¬ë§Œì˜ ë´‡ì„ í•œ ë²ˆ ë§Œë“¤ì–´ ë³´ìê³ ìš”!

[ì§€ë‚œ ë¬¸ì„œ](1.%20Discord%20ë´‡%20ë¡œê·¸ì¸.md)ëŠ” ì–´ë• ë‚˜ìš”?

**ì˜¤ëŠ˜ë„ ì§€ë‚œ ë¬¸ì„œì²˜ëŸ¼ ë”±! ë”±! í¬ì¸íŠ¸ë§Œ ì§šìœ¼ë©´ì„œ ë„˜ì–´ê°‘ë‹ˆë‹¤!**

ì¤€ë¹„ ë˜ì…¨ë‹¤ë©´! ë°”ë¡œ ìŠ¤ë”°ëœ¨!

---

ì§€ë‚œë²ˆì—ëŠ” ë´‡ì´ ì„±ê³µì ìœ¼ë¡œ ë¡œê·¸ì¸ê¹Œì§€ í•˜ê³  ëëƒˆìŠµë‹ˆë‹¤.

ì´ë²ˆì—”, ë´‡ì´ "ë¡œê·¸ì¸ë§Œ" í•œë‹¤ë©´ ì˜ë¯¸ ì—†ê² ì£ ?

ë°”ë¡œ, "ê¸°ëŠ¥"ì„ ì¶”ê°€í•´ì•¼ ë´‡ì„ ë§Œë“  ë³´ëŒ? ëª©ì ?ì´ ìˆì„ ê²ë‹ˆë‹¤.

ì´ **"ê¸°ëŠ¥"ì„ ë´‡ì—ì„œëŠ” "ëª…ë ¹ì–´"** ë¼ê³  í•˜ë©°, **"ëª…ë ¹ì–´"ì˜ ê¸°ì´ˆëŠ” "Ping-Pong í…ŒìŠ¤íŠ¸"** ì…ë‹ˆë‹¤.

ê·¸ëŸ¼, Ping-Pong ê¸°ëŠ¥ì„ ë§Œë“¤ëŸ¬ ê°€ ë³´ì£ !

---

## 1. ì½”ë“œ ì¶”ê°€ ë¶€ë¶„

íŒŒì¼ì€ ê³„ì† ì—…ë°ì´íŠ¸ë  ì˜ˆì •ì´ë‹ˆ, ì•„ë˜ ë²„íŠ¼ì„ ëˆŒëŸ¬ í˜„ì¬ ë²„ì „ì˜ ì½”ë“œë¥¼ í™•ì¸í•´ ì£¼ì„¸ìš”!

<details>
<summary>main.go ì½”ë“œ í™•ì¸</summary>

```go
package main

import (
  "Sketchbook/commands"
  "fmt"
  "github.com/bwmarrin/discordgo"
  "github.com/joho/godotenv"
  "log"
  "os"
  "os/signal"
)

func main() {
  err := godotenv.Load(".env")
  if err != nil {
    log.Fatal(err)
  }

  DISCORD_BOT_TOKEN := os.Getenv("DISCORD_BOT_TOKEN")
  if DISCORD_BOT_TOKEN == "" {
    log.Fatal("You need to set DISCORD_BOT_TOKEN")
  }

  Sketchbook, err := discordgo.New("Bot " + DISCORD_BOT_TOKEN)
  if err != nil {
    log.Fatal("Unable to create discord session: ", err)
  }

  // ì¶”ê°€
  Sketchbook.AddHandler(commands.OnInteractionCreate)

  err = Sketchbook.Open()
  if err != nil {
    log.Fatal("Unable to connect discord: ", err)
  }
  defer Sketchbook.Close()

  fmt.Println("Bot is now running. Press CTRL-C to exit.")

  // ì¶”ê°€
  _, err = Sketchbook.ApplicationCommandCreate(Sketchbook.State.User.ID, "", &discordgo.ApplicationCommand{
    Name:        "ping",
    Description: "Replies with pong.",
  })
  if err != nil {
    log.Fatal("Unable to create application command: ", err)
  }

  stop := make(chan os.Signal, 1)
  signal.Notify(stop, os.Interrupt)
  <-stop

  fmt.Println("Shutting down...")
}
```

</details>

<details>
<summary>commands/ping.go ì½”ë“œ í™•ì¸</summary>

```go
package commands

import (
  "fmt"
  "github.com/bwmarrin/discordgo"
)

func OnInteractionCreate(s *discordgo.Session, i *discordgo.InteractionCreate) {
  ping := s.HeartbeatLatency().Milliseconds()
  if i.ApplicationCommandData().Name == "ping" {
    s.InteractionRespond(i.Interaction, &discordgo.InteractionResponse{
      Type: discordgo.InteractionResponseChannelMessageWithSource,
      Data: &discordgo.InteractionResponseData{
        Content: fmt.Sprintf("ğŸ“ Pong! %dms", ping),
      },
    })
  }
}

```

</details>

---

## ğŸ¥Š main.go ì¶”ê°€ëœ ë¶€ë¶„ - .AddHandler()

ê¸°ì¡´ì— ìˆë˜ ë¶€ë¶„ì€ [ì§€ë‚œ ë¬¸ì„œ](1.%20Discord%20ë´‡%20ë¡œê·¸ì¸.md)ë¥¼ ì°¸ê³ í•´ ì£¼ì‹œê³ ,

ì´ë²ˆ ë¬¸ì„œì—ì„œëŠ” "ì¶”ê°€ëœ ë¶€ë¶„"ë§Œ ì„¤ëª…í•˜ê³  ë„˜ì–´ê°€ê² ìŠµë‹ˆë‹¤.

---

```
Sketchbook.AddHandler(commands.OnInteractionCreate)
```

ì¼ë‹¨ì€, ì´ë¦„ë§Œ ë´ì„œëŠ” í—¨ë“¤ëŸ¬ë¥¼ ì¶”ê°€í•´ ì£¼ëŠ” ê²ƒ ê°™ì€ë°, ì˜ì€ ëª¨ë¥´ê² ì£ ?

ê°„ë‹¨í•˜ê²Œ ë¡œì§ë¶€í„° ì„¤ëª…í•˜ìë©´, í•¨ìˆ˜ ì¸ìì— ë“¤ì–´ì˜¤ëŠ” í•¨ìˆ˜ë¥¼ ì´ë²¤íŠ¸ë¡œ ë“±ë¡ ì‹œí‚¤ëŠ” ê²ë‹ˆë‹¤.

ê·¸ í›„ì—, ë´‡ì„ ì˜¤í”ˆí•˜ê²Œ ë˜ëŠ”ë°, ë§Œì•½ ë´‡ì„ ë¨¼ì € ì˜¤í”ˆí•œ í›„ì— ì´ë²¤íŠ¸ë¥¼ ë“±ë¡ì‹œí‚¨ë‹¤ë©´ ì–´ë–»ê²Œ ë ê¹Œìš”?

ë°”ë¡œ, ì˜¤í”ˆí•œ ì‹œê°„ ~ ì´ë²¤íŠ¸ ë“±ë¡ ì‹œê°„ ì‚¬ì´ì— ì¡´ì¬í•˜ëŠ” ì‹œê°„ì—” ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ê²Œ ë©ë‹ˆë‹¤.

ê·¸ë ‡ì§€ë§Œ, ì´ë²¤íŠ¸ ë“±ë¡ì„ ë¨¼ì € í•œ í›„ì— ì˜¤í”ˆí•˜ê²Œ ëœë‹¤ë©´, ì˜¤í”ˆí•˜ìë§ˆì ì´ë²¤íŠ¸ëŠ” ì´ë¯¸ ë“±ë¡ì´ ì™„ë£Œëœ ìƒíƒœì´ë‹ˆ, ë°”ë¡œ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.

ì´ë ‡ê²Œë§Œ ì•Œê³  ë„˜ì–´ê°€ë©´ ì°¨ì•„ã…ì•” ì¢‹ê² ì§€ë§Œ.. ì§€ë‚œ ë¬¸ì„œë¥¼ ë³´ì…¨ë‹¤ë©´ ì™ ì§€ ëª¨ë¥¼ ì°ì°í•¨ì´ ë‚¨ì•„ìˆì£ ?

AddHandlerë¥¼ ì¢€ ë” ìì„¸íˆ ì‚´í´ ë´…ì‹œë‹¤!

```
// AddHandler allows you to add an event handler that will be fired anytime
// the Discord WSAPI event that matches the function fires.
// The first parameter is a *Session, and the second parameter is a pointer
// to a struct corresponding to the event for which you want to listen.
//
// eg:
//     Session.AddHandler(func(s *discordgo.Session, m *discordgo.MessageCreate) {
//     })
//
// or:
//     Session.AddHandler(func(s *discordgo.Session, m *discordgo.PresenceUpdate) {
//     })
//
// List of events can be found at this page, with corresponding names in the
// library for each event: https://discord.com/developers/docs/topics/gateway#event-names
// There are also synthetic events fired by the library internally which are
// available for handling, like Connect, Disconnect, and RateLimit.
// events.go contains all of the Discord WSAPI and synthetic events that can be handled.
//
// The return value of this method is a function, that when called will remove the
// event handler.
func (s *Session) AddHandler(handler interface{}) func()
```

AddHandlerëŠ” í•¨ìˆ˜ì™€ ì¼ì¹˜í•˜ëŠ” Discord WSAPI ì´ë²¤íŠ¸ê°€ ë°œìƒí•  ë•Œë§ˆë‹¤ ì‹¤í–‰ë˜ëŠ” ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¥¼ ì¶”ê°€í•´ ì¤€ë‹¤ê³  í•©ë‹ˆë‹¤.

Discord WSAPIë¼.. ë­”ê°€ WS/API ì´ë ‡ê²Œ ìª¼ê°¤ ìˆ˜ ìˆì„ ê²ƒ ê°™ì€ë°.. ì¡°ê¸ˆ ìƒì†Œí•˜ì‹œë ¤ë‚˜ìš”?

í’€ì–´ì„œ ì“°ë©´ **WebSocket + API** ì…ë‹ˆë‹¤. ì›¹ì†Œì¼“ê³¼ API.. ì–´ë””ì„ ê°€ í•œ ë²ˆ ì¯¤ì€ ë“¤ì–´ë´¤ì§€ë§Œ ì„¤ëª… í•  ìˆ˜ ìˆì–´ìš”?

ê·¸ëŸ¼ ë„˜ì–´ê°€ê³ , ì•„ë‹ˆë©´ ì—¬ê¸° ì§‘ì¤‘í•´ ë³´ì„¸ìš”.

ì „ì—” ì‹œìŠ¤í…œ í”„ë¡œê·¸ë˜ë°ì´ì—ˆì§€ë§Œ, ì´ë²ˆì—” ë„¤íŠ¸ì›Œí¬ í”„ë¡œê·¸ë˜ë°ì…ë‹ˆë‹¤!

---

### ë¨¼ì € WebSocket ë¶€í„°!

WebSocketì€ Socketì„ Webì„ ì´ìš©í•´ì„œ í†µì‹ í•˜ëŠ” ê²ë‹ˆë‹¤.

Socketì€ ì´ì œ ë˜ ì‹œìŠ¤í…œ í”„ë¡œê·¸ë˜ë°ì„ ë°°ìš°ë©´ ë‚˜ì˜¤ëŠ”ë°, ê·¸ëƒ¥ ì‰½ê³  ê°„ë‹¨í•˜ê²Œ! "ì›¹ì†Œì¼“"ë§Œ ë‹¤ë£¨ê³  ë„˜ì–´ê°€ê² ìŠµë‹ˆë‹¤.

ìì„¸í•œ ë‚´ìš©ì€ ì œê°€ ìš©ì–´ë¥¼ ì œì‹œí–ˆìœ¼ë‹ˆ, ì§ì ‘ ì°¾ì•„ë³´ì‹œëŠ” ê±¸ ì¶”ì²œí•´ìš”!

ì¼ë°˜ì ìœ¼ë¡œ ë³´í†µ "ì„œë²„"ëŠ” "ë°ì´í„°ë¥¼ ìš”ì²­"í•˜ë©´ "ë°ì´í„°ë¥¼ ë³´ë‚´ì¤Œ" ì´ë ‡ê²Œ 2ê°€ì§€ ë™ì‘ìœ¼ë¡œ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤.

ê·¸ë¦¬ê³ , "ë°ì´í„°ë¥¼ ë³´ë‚´ì£¼"ë©´ ê·¸ê±¸ë¡œ í†µì‹ ì€ ëë‚©ë‹ˆë‹¤.

í•˜ì§€ë§Œ, ì›¹"ì„œë²„"ê°€ ì•„ë‹ˆë¼ ì›¹"ì†Œì¼“"ì´ë‹ˆê¹ ë­”ê°€ ë‹¤ë¥¼ ê²ƒ ê°™ì€ë°ìš”?

ì›¹"ì†Œì¼“"ì€ **ì§€ì†ì ì¸ ì—°ê²°**ë¡œ í†µì‹ í•˜ëŠ”ë°, ì¦‰ **í•œ ë²ˆ ì—°ê²°ë˜ë©´ ì„œë¡œ ì—°ê²°ì´ ëŠì–´ì§ˆ ë•Œê¹Œì§€ ê³„ì† ë°ì´í„°ë¥¼ ì£¼ê³  ë°›ì„ ìˆ˜ ìˆ**ìŠµë‹ˆë‹¤.

ê·¸ ê²°ê³¼, **ì–‘ë°©í–¥ í†µì‹ **ì´ ê°€ëŠ¥í•´ì ¸, ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ê°€ **ë™ì‹œì— ë°ì´í„°ë¥¼ ì£¼ê³ ë°›ì„ ìˆ˜ ìˆê²Œ**ë˜ê³ , í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ ì—†ì´ë„ **ì„œë²„ê°€ ë°ì´í„°ë¥¼ ë³´ë‚¼ ìˆ˜ ìˆê²Œ**ë©ë‹ˆë‹¤.

ë˜í•œ, **ì—°ê²°ì´ ê³„ì† ìœ ì§€**ë˜ëŠ” íŠ¹ì„±ë•Œë¬¸ì—, **ì‹¤ì‹œê°„ í†µì‹ ì´ ê°€ëŠ¥**í•´ì§€ê³ , ê³„ì† ìš”ì²­-ì‘ë‹µí•  ë•Œ ë§ˆë‹¤ ì—°ê²°ì„ ìƒˆë¡œ ë§ºì§€ ì•Šì•„ì„œ **íš¨ìœ¨ì„±**ë„ ìˆìŠµë‹ˆë‹¤.

### APIëŠ”?

APIëŠ” Application Programming Interfaceì˜ ì•½ìë¡œ, **í”„ë¡œê·¸ë¨ê³¼ í”„ë¡œê·¸ë¨ì´ ì„œë¡œ ëŒ€í™”í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ê·œì¹™**ì…ë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´ë³¼ê²Œìš”.

ì‹ë‹¹ì—ì„œ ì†ë‹˜ì´ ì›¨ì´í„°ì—ê²Œ ì£¼ë¬¸ì„ í•˜ë©´, ì£¼ë°©ì¥ì´ ìš”ë¦¬ë¥¼ ë§Œë“¤ì–´ ì›¨ì´í„°ë¥¼ í†µí•´ ì†ë‹˜ì—ê²Œ ì „ë‹¬í•´ì¤ë‹ˆë‹¤.

ì´ê±¸, ê·¸ëŒ€ë¡œ ìš©ì–´ë§Œ ë°”ë€Œë©´ ë°”ë¡œ APIê°€ ë©ë‹ˆë‹¤.

ì‹ë‹¹ì„ í”„ë¡œê·¸ë¨ìœ¼ë¡œ, ì›¨ì´í„°ë¥¼ APIë¡œ, ì£¼ë¬¸ì„ ìš”ì²­ìœ¼ë¡œ, ì£¼ë°©ì¥ì„ ë‹¤ë¥¸ í”„ë¡œê·¸ë¨ì´ë‚˜ ì„œë²„ë¡œ, ìš”ë¦¬ë¥¼ ì‘ë‹µìœ¼ë¡œ ë°”ê¿”ë³¼ê²Œìš”.

í”„ë¡œê·¸ë¨ì´ APIì—ê²Œ ìš”ì²­ì„ í•˜ë©´, ë‹¤ë¥¸ í”„ë¡œê·¸ë¨(ì„œë²„/ì„œë¹„ìŠ¤)ì´ ì‘ë‹µí•´ì„œ APIë¥¼ í†µí•´ í”„ë¡œê·¸ë¨ìœ¼ë¡œ ì „ë‹¬í•´ ì¤ë‹ˆë‹¤.

"ë‹¤ë¥¸ í”„ë¡œê·¸ë¨(ì„œë²„/ì„œë¹„ìŠ¤)"ë¼.. êµ‰ì¥íˆ í¥ë¯¸ë¡­ì§€ ì•Šì€ê°€ìš”?

ì¡°ê¸ˆë§Œ ìƒê°í•´ë³´ë©´, ë‚´ê°€ ì§ì ‘ êµ¬í˜„í•˜ì§€ ì•Šì•„ë„, ì´ë¯¸ ë§Œë“¤ì–´ì§„ í”„ë¡œê·¸ë¨ì˜ ê¸°ëŠ¥ì„ ì´ìš©í•  ìˆ˜ ìˆì–ì•„ìš”!

ë„¤, ê·¸ë˜ì„œ **ë‚¨ì´ ë§Œë“¤ì–´ ë†“ì€ ê¸°ëŠ¥/ì„œë¹„ìŠ¤ ë“±ì„ ì‚¬ìš©í•´ì•¼ í•  ë•Œ** ì£¼ë¡œ APIë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

ê·¸ëŸ¬ë‹ˆê¹Œ ë‹¹ì—°íˆ **í™•ì¥ì„±**ì´ ì»¤ì§ˆ ìˆ˜ ë°–ì— ì—†ì„ê±°ì—ìš”.

ê·¼ë°, ì´ë ‡ê²Œ ë‚¨ì˜ ê²ƒì„ ê°€ì ¸ì˜¬ ë•Œ ë¬´ì‘ì • ìš”ì²­í•˜ê³ , ë³´ë‚´ì£¼ê²Œ ëœë‹¤ë©´ ì–´ë””ì„œëŠ” Aë°©ì‹ìœ¼ë¡œ, ë˜ ë‹¤ë¥¸ ê³³ì—ì„œëŠ” Bë°©ì‹ìœ¼ë¡œ, ì´ë ‡ê²Œ ë˜ê²Œ ë‹¤ì–‘í•œ ë°©ì‹ë“¤ì´ ë§ì•„ì§ˆ ê²ë‹ˆë‹¤.

ì´ëŸ¬ë©´ ë‹¹ì—°íˆ ë¬¸ì œê°€ ìƒê¸°ì§€ ì•Šì„ê¹Œìš”?

ê·¸ë˜ì„œ, APIëŠ” **í‘œì¤€í™”ëœ ë°©ì‹**ìœ¼ë¡œ ìš”ì²­í•˜ê³ , ë°›ì•„ì˜¬ ìˆ˜ ìˆëŠ”ë°, ì´ë¡œì¨ **ìë™í™”ë‘ í˜‘ì—…**í•˜ëŠ”ë° ë„ì›€ì´ ë§ì´ ë  ê²ë‹ˆë‹¤.

---

## ë‹¤ì‹œ, .AddHandler()

ì´ì œ `AddHandlerëŠ” í•¨ìˆ˜ì™€ ì¼ì¹˜í•˜ëŠ” Discord WSAPI ì´ë²¤íŠ¸ê°€ ë°œìƒí•  ë•Œë§ˆë‹¤ ì‹¤í–‰ë˜ëŠ” ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¥¼ ì¶”ê°€í•´ ì¤€ë‹¤ê³  í•©ë‹ˆë‹¤.` ì´ ë§ì„ ì´í•´í•  ìˆ˜ ìˆì„ ê²ë‹ˆë‹¤.

"ë””ìŠ¤ì½”ë“œì—ì„œ ì œê³µí•˜ëŠ” ì›¹ì†Œì¼“APIê°€ ìˆëŠ”ë°, ê·¸ WSAPI ì´ë²¤íŠ¸ì™€ ì¼ì¹˜í•˜ëŠ” í•¨ìˆ˜ê°€ ë°œìƒ > ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ì‹¤í–‰" í•  ìˆ˜ ìˆëŠ” ê²ƒì„ ì¶”ê°€í•´ ì¤ë‹ˆë‹¤.

[ë””ìŠ¤ì½”ë“œì—ì„œ ì œê³µí•˜ëŠ” WSAPI](https://discord.com/developers/docs/events/gateway#gateway-events)ëŠ” ë§í¬ í´ë¦­í•´ì„œ í™•ì¸í•´ ë³´ì‹œê³ ìš”!

ê·¼ë° ë­”ê°€ ì´ìƒí•©ë‹ˆë‹¤. ë¶„ëª… ì„¤ëª…ì—ì„œëŠ” 2ê°œì˜ íŒŒë¼ë¯¸í„°ë¥¼ ë„˜ê¸°ë¼ê³  í–ˆëŠ”ë°,

```Sketchbook.AddHandler(commands.OnInteractionCreate)```

í•˜ë‚˜ì˜ íŒŒë¼ë¯¸í„°ë°–ì— ì—†ëŠ”ë°ìš”?

ê·¸ì¹˜ë§Œ, OnInteractionCreate ë¥¼ ë³´ë©´

```func OnInteractionCreate(s *discordgo.Session, i *discordgo.InteractionCreate)```

ì´ë ‡ê²Œ 2ê°œì˜ íŒŒë¼ë¯¸í„°ê°€ ìˆìŠµë‹ˆë‹¤.

ë­”ê°€ ëŠë‚Œì ì¸ ëŠë‚Œ ì˜¤ì‹œë‚˜ìš”?

JS í–ˆë˜ ë¶„ë“¤ì´ë©´ ìµìˆ™í•˜ì‹¤ ë°”ë¡œ ê·¸ ìš©ì–´, "ì½œë°±í•¨ìˆ˜"ì…ë‹ˆë‹¤.

ì¼ë‹¨, ì½œë°±"í•¨ìˆ˜"ë¥¼ ë§Œë“¤ê¸° ì „ì—, "í•¨ìˆ˜"ë¶€í„° ë¨¼ì € ì•Œì•„ì•¼ê² ì£ ?

í•¨ìˆ˜ëŠ” [ping.go](../commands/ping.go) ì— ë‚˜ì™€ìˆìœ¼ë‹ˆ, ì´ ë¶€ë¶„ë¶€í„° ë¨¼ì € ë³´ê² ìŠµë‹ˆë‹¤.

---

## ğŸ¥Š [ping.go](../commands/ping.go) í•¨ìˆ˜

```
func OnInteractionCreate(s *discordgo.Session, i *discordgo.InteractionCreate) {
	ping := s.HeartbeatLatency().Milliseconds()
	if i.ApplicationCommandData().Name == "ping" {
		s.InteractionRespond(i.Interaction, &discordgo.InteractionResponse{
			Type: discordgo.InteractionResponseChannelMessageWithSource,
			Data: &discordgo.InteractionResponseData{
				Content: fmt.Sprintf("ğŸ“ Pong! %dms", ping),
			},
		})
	}
}
```

ì´ë ‡ê²Œ ìƒê²¼ëŠ”ë°, í•¨ìˆ˜ëŠ” ë‹¤ ì•„ì‹¤ê±°ë¼ ìƒê°í•©ë‹ˆë‹¤. (ëª¨ë¥´ì‹ ë‹¤ë©´ ì§€ê¸ˆ ì´ ë¬¸ì„œë¥¼ ë³´ì‹œëŠ” ê²ƒë„ í˜ë“œì‹¤ ê±°ì—ìš”)

Go ì—ì„œëŠ” í•¨ìˆ˜ë¥¼ ì´ë ‡ê²Œ ë§Œë“­ë‹ˆë‹¤.

```
func í•¨ìˆ˜ì´ë¦„(íŒŒë¼ë¯¸í„° ë¦¬ìŠ¤íŠ¸) ë°˜í™˜íƒ€ì… {
    ì½”ë“œ
}
```

C/C++ì—ì„œëŠ” func ìë¦¬ì— ë°˜í™˜íƒ€ì…ì´ ë‚˜ì™”ëŠ”ë°, Goì—ì„œëŠ” func í‚¤ì›Œë“œê°€ ë‚˜ì˜¤ê³ , ë°˜í™˜íƒ€ì…ì€ í•¨ìˆ˜ì´ë¦„ ë’¤ì— ë‚˜ì˜¤ì£ ?

ê·¸ëŸ°ë°, ì´ê²ƒë³´ë‹¤ ì¡°ê¸ˆ ë” íŠ¹ë³„í•œ ì ì´ ìˆìŠµë‹ˆë‹¤.

### Public vs Private

í•¨ìˆ˜ì´ë¦„ì´ **ëŒ€ë¬¸ìë¡œ ì‹œì‘**í•˜ë©´ **Public** ìœ¼ë¡œ, ì™¸ë¶€(ë‹¤ë¥¸ íŒ¨í‚¤ì§€)ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆì§€ë§Œ,

**ì†Œë¬¸ìë¡œ ì‹œì‘**í•˜ë©´ **Private**ë¡œ, íŒ¨í‚¤ì§€ ë‚´ë¶€ì—ì„œë§Œ ì ‘ê·¼ ê°€ëŠ¥í•©ë‹ˆë‹¤.

ì¦‰, publicì´ë¼ë˜ê°€ privateê°™ì€ í‚¤ì›Œë“œ ì—†ì´, ì‹œì‘í•˜ëŠ” ë¬¸ìë¡œ íŒë‹¨í•˜ê²Œ ë©ë‹ˆë‹¤.

```
package main

import (
    "fmt"
    "project/greetings"
)

func main() {
    greetings.SayHello()      // ê°€ëŠ¥
    // greetings.sayGoodbye() // ë¶ˆê°€ëŠ¥
}
```

```
package greetings

func SayHello() { // ëŒ€ë¬¸ìë¡œ ì‹œì‘í–ˆìœ¼ë¯€ë¡œ, ì™¸ë¶€ íŒ¨í‚¤ì§€ì—ì„œ ì ‘ê·¼ ê°€ëŠ¥
    fmt.Println("Hello!")
}

func sayGoodbye() { // ì†Œë¬¸ìë¡œ ì‹œì‘í–ˆìœ¼ë¯€ë¡œ, greetings íŒ¨í‚¤ì§€ ë‚´ë¶€ì—ì„œë§Œ ì ‘ê·¼ ê°€ëŠ¥
    fmt.Println("Goodbye!")
}
```

### íŒŒë¼ë¯¸í„° ë¦¬ìŠ¤íŠ¸

ì˜ˆì‹œë§Œ ê°„ë‹¨í•˜ê²Œ ì‚´í´ë³´ê³  ë„˜ê¸°ê² ìŠµë‹ˆë‹¤.

```
func add(a int, b int) int {
    return a + b
}
```

ë‹¨, íŒŒë¼ë¯¸í„° íƒ€ì…ì´ ë™ì¼í•œ ê²½ìš°, í•œ ë²ˆë§Œ ì¨ë„ ê´œì°®ìŒ.

```
func add(a, b int) int {
    return a + b
}
```

### ì—¬ëŸ¬ ê°œ ë°˜í™˜

ì „ì— Go ì—ì„œë§Œ íŠ¹ë³„í•˜ê²Œ ì—¬ëŸ¬ ê°’ì„ ë°˜í™˜í•  ìˆ˜ ìˆë‹¤ê³  í–ˆë˜ ê±°, ê¸°ì–µ ë‚˜ì‹œë‚˜ìš”?

Python ì—ì„œë„ ë¹„ìŠ·í•œ ê¸°ëŠ¥ì„ ì œê³µí•˜ì§€ë§Œ, ì–´ì¨Œë“  "íŠœí”Œ"ì´ë¼ëŠ” "í•˜ë‚˜ì˜ ê°’"ìœ¼ë¡œ ë°˜í™˜í•©ë‹ˆë‹¤.

í•˜ì§€ë§Œ, Go ëŠ” ì§„ì§œ "ì—¬ëŸ¬ ê°’"ì„ ë°˜í™˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì˜ˆì‹œë§Œ ì‚´í´ë³´ê³  ë„˜ì–´ê°ˆê²Œìš”.

```
func divide(a, b int) (int, int) {
    return a / b, a % b
}
```

### í•¨ìˆ˜ ë¦¬í„°ëŸ´, ìµëª… í•¨ìˆ˜, ëŒë‹¤

ë‹¤ ë™ì¼í•œ ë§ì´ë¼ê³  ë³´ì‹œë©´ ë©ë‹ˆë‹¤.

í•¨ìˆ˜ë¥¼ ë³€ìˆ˜ì²˜ëŸ¼ ì“¸ ìˆ˜ ìˆëŠ”ë°, ì¼ë‹¨ì€ "ì•„, ê·¸ë ‡êµ¬ë‚˜. ì´ëŸ° ê²ƒë„ ìˆêµ¬ë‚˜" ì •ë„ë§Œ ì§šê³  ë„˜ì–´ê°€ì„¸ìš”.

ë‚˜ì¤‘ì—, ì¢€ ë” ê¹Šê²Œ ë“¤ì–´ê°ˆ ì¼ì´ ìƒê¸°ë©´, ê·¸ë•Œ ì°¾ì•„ë³´ì…”ë„ ë  ê²ƒ ê°™ìŠµë‹ˆë‹¤ë§Œ, ê¶ê¸ˆí•˜ì‹œë‹¤ë©´ ê²€ìƒ‰ í•¨ í•´ ë³´ê³  ì˜¤ì„¸ìš”!

ì—¬ê¸°ì„ , ì˜ˆì‹œë§Œ ë³´ê³  ë„˜ì–´ê°€ê² ìŠµë‹ˆë‹¤.

```
f := func(name string) {
    fmt.Println("Hi,", name)
}
f("Gopher")
```

---

ì•„, ê·¸ë ‡ë‹¤ë©´ í•¨ìˆ˜ OnInteractionCreateëŠ” `func OnInteractionCreate(s *discordgo.Session, i *discordgo.InteractionCreate)` ì´ë ‡ê²Œ ë˜ì–´ìˆìœ¼ë‹ˆê¹Œ,

1. ëŒ€ë¬¸ìë¡œ ì‹œì‘í–ˆìœ¼ë‹ˆ ë‹¤ë¥¸ íŒ¨í‚¤ì§€ì—ì„œë„ ì ‘ê·¼ì´ ê°€ëŠ¥í•  ê²ƒì´ê³  (Public)
2. së‘ ië¼ëŠ” parameterë¥¼ ë°›ëŠ”ë°, sì˜ íƒ€ì…ì€ discordgo.Sessionì˜ í¬ì¸í„°, iëŠ” discordgo.InteractionCreateì˜ í¬ì¸í„°
3. ë¦¬í„´ íƒ€ì…ì´ ì—†ë„¤ (void)

ì´ ì •ë„ëŠ” ì•Œê² ì£ ?

### ì½œë°±

ë‹¤ì‹œ! main.go ë¡œ ëŒì•„ì™€ì„œ! ì½œë°± ì´ì•¼ê¸°ë¥¼ ë§ˆì € ëë‚´ë´…ì‹œë‹¤.

ì½œë°±í•¨ìˆ˜ëŠ” ~~"ì½œí–ˆìœ¼ë‹ˆê¹Œ ë°±í•´ë¼"ì¸ë°,,~~ **ì´ë²¤íŠ¸ê°€ ë°œìƒí–ˆì„ ë•Œ í˜¸ì¶œë˜ëŠ” í•¨ìˆ˜** ë˜ëŠ” **íŠ¹ì • ì‹œì ì— ë‹¤ë¥¸ ì½”ë“œì— ì˜í•´ ì‹¤í–‰ë˜ëŠ” í•¨ìˆ˜**ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤.

C/C++ ì—ì„œ ì´ëŸ° ê±° ë³´ì‹œì§€ ì•Šì•˜ë‚˜ìš”?

í•¨ìˆ˜í¬ì¸í„°ë‹ˆë‹¤. ~~C/C++ í–ˆìœ¼ë‹ˆê¹Œ ë‹¤ ì•„ì‹œì£ ?~~

ì¸í„°ë„·ì— ë§ì´ ë‚˜ì™€ìˆìœ¼ë‹ˆê¹Œ, ì§ì ‘ í•¨ ì°¾ì•„ë³´ì‹œê³ ! ì—¬ê¸°ì„œëŠ” Goì˜ ê´€ì ì—ì„œë§Œ ë³¼ê²Œìš”.

```
package main

import "fmt"

func printMessage(msg string) {
    fmt.Println("ë©”ì‹œì§€:", msg)
}

func runCallback(f func(string)) {
    f("ì½œë°± í˜¸ì¶œ!")
}

func main() {
    runCallback(printMessage)
}
```

Go ì—ì„œëŠ” `runCallback()` í•¨ìˆ˜ì²˜ëŸ¼, **í•¨ìˆ˜ ìì²´ë¥¼ ê°’ìœ¼ë¡œ íŒŒë¼ë¯¸í„°ë¡œ ë„˜ê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.**

ê·¸ë¦¬ê³ , í•„ìš”í•  ë•Œ í•¨ìˆ˜ë¥¼ `f()` ì²˜ëŸ¼ í˜¸ì¶œì‹œì¼œì£¼ëŠ” ê²ƒì´ì£ .

ë‹¨, **í•¨ìˆ˜ë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ë„˜ê¸¸ ë•Œ ê·¸ í•¨ìˆ˜ì˜ ëª¨ì–‘(ì‹œê·¸ë‹ˆì²˜, íŒŒë¼ë¯¸í„° ë¦¬ìŠ¤íŠ¸)ë§Œ ë§ì¶”ë©´** GoëŠ” í˜¸ì¶œ ì‹œì ì— **ìë™ìœ¼ë¡œ í•„ìš”í•œ ê°’ì„ ë„£ì–´ì„œ ì‹¤í–‰**í•´ì¤ë‹ˆë‹¤.

---

## ì§„ì§œ ë§ˆì§€ë§‰, .AddHandler()

ë‹¤ì‹œ, ì•„ê¹Œì˜ ì§ˆë¬¸ìœ¼ë¡œ ëŒì•„ê°€ì„œ .AddHandler() ì„¤ëª…ì—ì„œëŠ” ë¶„ëª…,

```
The first parameter is a *Session, and the second parameter is a pointer
to a struct corresponding to the event for which you want to listen.
```

2ê°œì˜ ì¸ìë¥¼ ë„˜ê¸°ë¼ê³  í–ˆëŠ”ë°, ì™œ

```Sketchbook.AddHandler(commands.OnInteractionCreate)```

ì´ë ‡ê²Œ í•˜ë‚˜ì˜ ì¸ìë§Œ ë„˜ê²¨ì¤˜ë„ ê´œì°®ì„ê¹Œìš”?

ë°”ë¡œ, **Goì˜ ì½œë°± êµ¬ì¡°ì™€ í•¨ìˆ˜ ì‹œê·¸ë‹ˆì²˜ ì„¤ê³„ ì² í•™**ë•Œë¬¸ì…ë‹ˆë‹¤.

ë°©ê¸ˆ, ì½œë°± í•¨ìˆ˜ì˜ íŠ¹ì§•ì„ ë´¤ì—ˆì£ ?

ì—¬ê¸°ì„œë„ ë˜‘ê°™ì´ ì ìš©ë©ë‹ˆë‹¤.

.AddHandler()ì—ëŠ” "ì´ë²¤íŠ¸ê°€ ë°œìƒí•˜ë©´ ì´ ì½œë°± í•¨ìˆ˜(`OnInteractionCreate()`)ë¥¼ ì‹¤í–‰í•´ì¤˜!"ë¼ê³  **í•¨ìˆ˜(ì½œë°±) í•˜ë‚˜ë§Œ ë“±ë¡**í•©ë‹ˆë‹¤.

ì´ë•Œ, ì½œë°± í•¨ìˆ˜(`OnInteractionCreate()`)ì˜ íŒŒë¼ë¯¸í„° ê°œìˆ˜ì™€ íƒ€ì…, ì¦‰ ì‹œê·¸ë‹ˆì²˜(`*discordgo.Session, *discordgo.InteractionCreate`)ê°€ `.AddHandler()`ê°€ ë™ì¼í•˜ëŠ” ê²ƒê³¼ ì •í™•íˆ ì¼ì¹˜í•œë‹¤ë©´, **.AddHandler(), í˜¹ì€ Go ëŸ°íƒ€ì„ì´ ìë™ìœ¼ë¡œ ë‘ íŒŒë¼ë¯¸í„°ë¥¼ ë„£ì–´ì„œ í˜¸ì¶œ**í•´ ì¤ë‹ˆë‹¤.

ì¦‰, **í•¨ìˆ˜ ì‹œê·¸ë‹ˆì²˜ë§Œ ë§ì¶”ë©´, .AddHandler()ì—ëŠ” í•¨ìˆ˜ í•˜ë‚˜ë§Œ ë„˜ê¸°ë©´ ë˜ê³ , ì‹¤ì œ í˜¸ì¶œ ì‹œì ì—ì„œëŠ” ì‹œìŠ¤í…œì´ ì•Œì•„ì„œ íŒŒë¼ë¯¸í„°ë¥¼ ë„£ì–´ì„œ ì‹¤í–‰í•´ì¤ë‹ˆë‹¤.**

ì´ëŸ° êµ¬ì¡°ëŠ” Goì˜ ë‹¤ì–‘í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬(HTTP, sort ë“±)ì—ì„œ ìì£¼ ë“±ì¥í•˜ë©°, **Goì˜ ì½œë°± íŒ¨í„´ ì„¤ê³„ ì² í•™**ì´ë¼ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

## ğŸ¥Š main.go ì¶”ê°€ëœ ë¶€ë¶„ - .ApplicationCommandCreate()

```
  _, err = Sketchbook.ApplicationCommandCreate(Sketchbook.State.User.ID, "", &discordgo.ApplicationCommand{
    Name:        "ping",
    Description: "Replies with pong.",
  })
  if err != nil {
    log.Fatal("Unable to create application command: ", err)
  }
```

ì—¬ê¸°ì„œ, `_` ëŠ” **blank identifier(ë¹ˆ ì‹ë³„ì)** ë¼ê³  ë¶€ë¥´ëŠ”ë°, **ë¦¬í„´ê°’ì„ ë°›ê¸´ í•´ì•¼ í•˜ì§€ë§Œ ì‹¤ì œë¡œëŠ” í•„ìš” ì—†ì–´ì„œ ë²„ë¦¬ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©**í•˜ëŠ” ë³€ìˆ˜ì…ë‹ˆë‹¤.

ê·¸ë¦¬ê³ , ì¡°ê±´ë¬¸ì€ ì´ì „ ì½”ë“œì™€ ë™ì¼í•˜ê¸° ë•Œë¬¸ì— ë„˜ì–´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

---

`.ApplicationCommandCreate()` ê°€ ê¶ê¸ˆí•˜ì§€ ì•Šë‚˜ìš”?

ìì„¸íˆ ë´ ë³¼ê²Œìš”.

```
// ------------------------------------------------------------------------------------------------
// Functions specific to application (slash) commands
// ------------------------------------------------------------------------------------------------
```

ì´ë ‡ê²Œ ì„¹ì…˜ì´ ë¨¼ì € ë‚˜ë‰˜ì–´ì ¸ ìˆìœ¼ë‹ˆê¹Œ, ê·¸ ë°‘ì— ìˆëŠ” í•¨ìˆ˜ë“¤ì€ ë‹¤ slash ëª…ë ¹ì–´ì¼ ê±°ê³ ,

ê·¸ ì¤‘, ê°€ì¥ ë¨¼ì € .ApplicationCommandCreate() ì„¤ëª…ì´ ë‚˜ì™€ìˆë„¤ìš”.

```
// ApplicationCommandCreate creates a global application command and returns it.
// appID       : The application ID.
// guildID     : Guild ID to create guild-specific application command. If empty - creates global application command.
// cmd         : New application command data.

func (s *Session) ApplicationCommandCreate(appID string, guildID string, cmd *ApplicationCommand, options ...RequestOption) (ccmd *ApplicationCommand, err error) {}
```

appIDë¥¼ ë„£ê³ , guildID(í•´ë‹¹ ì„œë²„ì—ì„œë§Œ ì‚¬ìš© ê°€ëŠ¥í•˜ê²Œ í•  ìˆ˜ ìˆì§€ë§Œ, ë¹ˆë¬¸ìì—´ì„ ì…ë ¥í•œë‹¤ë©´ ëª¨ë“  ì„œë²„ì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•˜ê²Œ ë¨)ì™€

cmdë¥¼ ë„£ìœ¼ë¼ê³  í•˜ëŠ”ë°, ì´ë•Œ cmdëŠ” `ApplicationCommand` íƒ€ì…ìœ¼ë¡œ, í¬ì¸í„° ë³€ìˆ˜ì´ë„¤ìš”.

ë§ˆì§€ë§‰ì—ëŠ” ì˜µì…˜ì„ ê°€ë³€ì¸ìë¡œ ë„£ì„ ìˆ˜ ìˆë‹¤ê³  í•˜ëŠ”ë°, ì—¬ê¸°ì„  ë„˜ì–´ê°ˆê²Œìš”.

ë­, appIDì™€ guildIDëŠ” `string íƒ€ì…`ì´ë‹ˆê¹ ë„˜ì–´ê°€ê³ , `ApplicationCommand íƒ€ì…`ì€ ìƒì†Œí•˜ë‹ˆê¹ ìì„¸íˆ ë´…ì‹œë‹¤.

```
// ApplicationCommand represents an application's slash command.
type ApplicationCommand struct {
	ID                string                 `json:"id,omitempty"`
	ApplicationID     string                 `json:"application_id,omitempty"`
	GuildID           string                 `json:"guild_id,omitempty"`
	Version           string                 `json:"version,omitempty"`
	Type              ApplicationCommandType `json:"type,omitempty"`
	Name              string                 `json:"name"`
	NameLocalizations *map[Locale]string     `json:"name_localizations,omitempty"`

	// NOTE: DefaultPermission will be soon deprecated. Use DefaultMemberPermissions and Contexts instead.
	DefaultPermission        *bool  `json:"default_permission,omitempty"`
	DefaultMemberPermissions *int64 `json:"default_member_permissions,string,omitempty"`
	NSFW                     *bool  `json:"nsfw,omitempty"`

	// Deprecated: use Contexts instead.
	DMPermission     *bool                         `json:"dm_permission,omitempty"`
	Contexts         *[]InteractionContextType     `json:"contexts,omitempty"`
	IntegrationTypes *[]ApplicationIntegrationType `json:"integration_types,omitempty"`

	// NOTE: Chat commands only. Otherwise it mustn't be set.

	Description              string                      `json:"description,omitempty"`
	DescriptionLocalizations *map[Locale]string          `json:"description_localizations,omitempty"`
	Options                  []*ApplicationCommandOption `json:"options"`
}
```

êµ¬ì¡°ì²´ëŠ” C/C++í–ˆìœ¼ë‹ˆê¹Œ ë‹¤ ì•„ì‹¤ê±°ê³ , ë³€ìˆ˜ ì´ë¦„ê³¼ íƒ€ì…, íƒœê·¸(êµ¬ì¡°ì²´ë¥¼ JSONí˜¹ì€ ë‹¤ë¥¸ í¬ë§·ìœ¼ë¡œ ë³€í™˜í•˜ê±°ë‚˜ íŒŒì‹±í•  ë•Œ, í•„ë“œ ì´ë¦„ì„ ì–´ë–»ê²Œ ë§¤í•‘í•  ì§€ ì§€ì •í•˜ëŠ” ì—­í• ) ìˆœì…ë‹ˆë‹¤.

`omitempty`ëŠ” ì„ íƒìœ¼ë¡œ ê°’ì„ ì…ë ¥í•  ìˆ˜ ìˆë‹¤ê³  ìƒê°í•˜ë©´ ë˜ëŠ”ë°, `omitempty`ê°€ ì—†ì„ ê²½ìš°ì—ëŠ” ê°’ì´ ë¹„ì–´ ìˆë‹¤ë©´ "ë¹ˆë¬¸ìì—´, 0, nil ë“± í•­ìƒ í•„ë“œê°€ í¬í•¨",

`omitempty`ê°€ ì—†ì„ ê²½ìš°ì—ëŠ” ê°’ì´ ë¹„ì–´ ìˆë‹¤ë©´ ì•„ì˜ˆ ê·¸ í•„ë“œê°€ JSONì— ì•ˆ ë‚˜ì˜µë‹ˆë‹¤.

ì´ ì ì„ ì´ìš©í•´, ì„ íƒì  ë°ì´í„°ë¥¼ í‘œí˜„, ë¶ˆí•„ìš”í•œ ë°ì´í„° ì „ì†¡ì„ ì¤„ì¼ ìˆ˜ ìˆê³ , API ì‘ë‹µ ì‹œ ê°’ì´ ì—†ì„ ë•Œ í•„ë“œë¥¼ ëº„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì—¬ê¸°ì„œëŠ” **JSON ì¶œë ¥ ê²°ê³¼ì— ì˜í–¥ì„ ì£¼ëŠ” íƒœê·¸**ë¼ê³  ê¸°ì–µí•˜ë©´ ë  ê²ƒ ê°™ê³ ,

Nameê³¼ Descriptionì„ ì˜ˆì‹œë¡œ ë„£ì–´ë†¨ìœ¼ë‹ˆ, ì´ë¥¼ ì°¸ê³ í•´ ë§Œì•½ ë‹¤ë¥¸ ì˜µì…˜ì´ í•„ìš”í•  ë•Œ, ì˜ˆì‹œì²˜ëŸ¼ ê°’ì„ ë„£ì–´ì£¼ë©´ ë˜ê² ìŠµë‹ˆë‹¤.

---

## ğŸ¥Š [ping.go](../commands/ping.go) í•¨ìˆ˜ ë‚´ë¶€

ì•„ê¹Œ ì½œë°±í•¨ìˆ˜ë¥¼ ìœ„í•´.. ì£¼ìš” ë¬¸ë²• ì¤‘ í•¨ìˆ˜ ë¶€ë¶„ì„ ì„¤ëª…í–ˆìœ¼ë‹ˆ, í•¨ìˆ˜ ë‚´ë¶€ë§Œ ì„¤ëª…í•˜ê² ìŠµë‹ˆë‹¤.

---

```
ping := s.HeartbeatLatency().Milliseconds()
```

ping ì´ë¼ëŠ” ë³€ìˆ˜ì— ìƒˆë¡œ ê°’ì„ í• ë‹¹í•´ ì£¼ëŠ”ë°, ê·¸ê²Œ ì¼ë‹¨ì€ ì„¸ì…˜ì˜ `.HeartbeatLatency()` ë©¤ë²„í•¨ìˆ˜ë¥¼ ì´ìš©í•˜ê³  ìˆë„¤ìš”.  ìì„¸íˆ ë³¼ê²Œìš”.

```
// HeartbeatLatency returns the latency between heartbeat acknowledgement and heartbeat send.
func (s *Session) HeartbeatLatency() time.Duration {

	return s.LastHeartbeatAck.Sub(s.LastHeartbeatSent)

}
```

ê·¸ëŸ¬ë‹ˆê¹Œ ëŒ€-----ì¶© ë³´ë‚¸ ì‹œê°ê³¼ ë°›ì€ ì‹œê°ì˜ ì°¨ì´ ê³„ì‚°í•´ì„œ ë°˜í™˜í•´ì¤€ë‹¤ê³  í•©ë‹ˆë‹¤.

ê·¼ë°? ê·¸ ë°˜í™˜ê°’ì˜ íƒ€ì…ì´ `time.Duration` ì´ë„¤ìš”.

ì´ íƒ€ì…ì—ì„œëŠ” ë‹¤ì–‘í•œ ë©¤ë²„í•¨ìˆ˜ê°€ ë˜ ì¡´ì¬í•˜ê²Œ ë˜ëŠ”ë°, ê·¸ ì¤‘ì—ì„œ Milliseconds() ëŠ”

```
// Milliseconds returns the duration as an integer millisecond count.
func (d Duration) Milliseconds() int64 { return int64(d) / 1e6 }
```

ì •ìˆ˜ë¡œ ëœ msê°’ì„ ë°˜í™˜ì‹œí‚¨ë‹¤ê³  í•©ë‹ˆë‹¤.

ê·¼ë° ë­”ê°€ ì•„ê¹Œë¶€í„° ë¶ˆí¸í•œ ì  í•˜ë‚˜ ìˆì§€ ì•Šìœ¼ì…¨ë‚˜ìš”?

ì €ëŠ” `func (ì™œ ìˆì§€? ë­ì§€?) í•¨ìˆ˜ëª…() ë°˜í™˜íƒ€ì… { ë‚´ë¶€ }` ì—ì„œ í•¨ìˆ˜ëª… ì•ì— ì € ê´„í˜¸ë¶€ë¶„! ì´ ì‚´ì§ ê±°ìŠ¬ë¦¬ë˜ë°ìš”? ~~ë‚˜ë§Œ ê·¸ë¬ë‚˜ìš”?~~

ì•„ë¬´íŠ¼, ì € ë¶€ë¶„ì€ **ë©”ì„œë“œ** ë¼ê³  ë¶ˆë¦¬ëŠ”ë°, í•´ë‹¹ íƒ€ì…ì— "ì†í•´ ìˆë‹¤"ëŠ” ê²ƒì„ ëœ»í•©ë‹ˆë‹¤.

ì§€ê¸ˆê¹Œì§„ ê³„ì† ë©¤ë²„í•¨ìˆ˜ë¼ê³  ì´ì•¼ê¸° í–ˆì—ˆëŠ”ë°, ì—„ë°€í•˜ê²ŒëŠ” "ë©¤ë²„í•¨ìˆ˜ëŠ” í´ë˜ìŠ¤ ë‚´ë¶€ì—ì„œ ì„ ì–¸í•˜ëŠ” ê²ƒì´ê³ ,

"ë©”ì„œë“œ"ëŠ” êµ¬ì¡°ì²´ì™€ ì¸í„°í˜ì´ìŠ¤ì— ë¶™ì¼ ìˆ˜ ìˆëŠ” ê±´ë°, Go ëŠ” í´ë˜ìŠ¤ë¼ëŠ” ê²ƒì´ ì—†ì–´ì„œ ë©”ì„œë“œë¼ê³  ë¶ˆë¦¬ë©°,

êµ¬ì¡°ì²´ë¿ë§Œ ì•„ë‹ˆë¼, ì‚¬ìš©ì ì •ì˜ íƒ€ì…(ex. intì˜ ë³„ì¹­ ë“±)ì—ë„ ë¶™ì¼ ìˆ˜ ìˆê³  ì–´ì©Œê³ ì €ì©Œê³ ì´ì§€ë§Œ

ì „ ê·¸ëƒ¥ ë¬´ì‹í•˜ë‹ˆê¹Œ(?) ë©¤ë²„í•¨ìˆ˜ë¡œ í†µì¼í• ê²Œìš”.

---

ì, ì–´ì¨Œë“  ì´ì œ ping ì´ë¼ëŠ” ë³€ìˆ˜ì—ëŠ” latencyë¥¼ msë¡œ ë³€í™˜ì‹œí‚¨ ê°’ì´ ì €ì¥ë˜ì–´ ìˆë„¤ìš”.

`if i.ApplicationCommandData().Name == "ping" {`

ì—¬ê¸°ì—ì„œëŠ” ì„¸ì…˜ì— `ApplicationCommandData()` ì˜ `Name`ì´ `ping` ì´ë¼ë©´ ì•„ë˜ ë¸”ëŸ­ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.

`.ApplicationCommandData()`ë¥¼ ì¡°ê¸ˆ ë” ìì„¸íˆ ì‚´í´ë³´ë©´,

```
// ApplicationCommandData is helper function to assert the inner InteractionData to ApplicationCommandInteractionData.
// Make sure to check that the Type of the interaction is InteractionApplicationCommand before calling.
func (i Interaction) ApplicationCommandData() (data ApplicationCommandInteractionData) {
	if i.Type != InteractionApplicationCommand && i.Type != InteractionApplicationCommandAutocomplete {
		panic("ApplicationCommandData called on interaction of type " + i.Type.String())
	}
	return i.Data.(ApplicationCommandInteractionData)
}
```

ì´ë ‡ê²Œ ë‚˜ì˜¤ëŠ”ë°, ì‰½ê²Œ ìš”ì•½í•˜ìë©´ ìŠ¬ë˜ì‹œ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í–ˆì„ ë•Œ, ê·¸ ëª…ë ¹ì–´ì˜ ìƒì„¸ ì •ë³´ë¥¼ ì“¸ ìˆ˜ ìˆê²Œ í•´ ì£¼ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤.

ì–´ì¨Œë“ , ì •ë³´ë¥¼ `ApplicationCommandInteractionData` íƒ€ì…ìœ¼ë¡œ ë³€í™˜ì‹œì¼œ ë°˜í™˜í•˜ëŠ”ë°, ë˜ ìì„¸íˆ ì‚´í´ë³´ë©´

```
type ApplicationCommandInteractionData struct {
	ID          string                                     `json:"id"`
	Name        string                                     `json:"name"`
	CommandType ApplicationCommandType                     `json:"type"`
	Resolved    *ApplicationCommandInteractionDataResolved `json:"resolved"`

	// Slash command options
	Options []*ApplicationCommandInteractionDataOption `json:"options"`
	// Target (user/message) id on which context menu command was called.
	// The details are stored in Resolved according to command type.
	TargetID string `json:"target_id"`
}
```

í•˜ë‚˜ì˜ êµ¬ì¡°ì²´ì…ë‹ˆë‹¤. `ID, Name ë“±`ì˜ ë°ì´í„°ê°€ í¬í•¨ë˜ì–´ ìˆë„¤ìš”.

ì—¬ê¸°ì„œ `Name`ì„ êº¼ë‚´ì„œ `ping`ì´ë¼ê³  ëª…ë ¹ì–´ê°€ ë“¤ì–´ì™”ì„ ë•Œ ì•„ë˜ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ê²Œ ë©ë‹ˆë‹¤.

---

```
s.InteractionRespond(i.Interaction, &discordgo.InteractionResponse{
    Type: discordgo.InteractionResponseChannelMessageWithSource,
    Data: &discordgo.InteractionResponseData{
        Content: fmt.Sprintf("ğŸ“ Pong! %dms", ping),
    },
})
```

ì´ì œ ë­ í•  ì§€ ê° ì˜¤ì‹œì£ ? ì„¸ì…˜ì— `InteractionRespond`ë¥¼ ì‚´í´ë´…ì‹œë‹¤.

```
// InteractionRespond creates the response to an interaction.
// interaction : Interaction instance.
// resp        : Response message data.
func (s *Session) InteractionRespond(interaction *Interaction, resp *InteractionResponse, options ...RequestOption) error
```

ì‘ë‹µì„ ë§Œë“ ë‹¤ê³  í•˜ë„¤ìš”.

ì²« ë²ˆì§¸ ì¸ìëŠ” `Interaction`ì˜ í¬ì¸í„° ë³€ìˆ˜ì¸ë°, `Interaction instance`ë¥¼ ëœ»í•œë‹¤ê³  ë‚˜ì™€ìˆë„¤ìš”.

iê°€ `discordgo.InteractionCreate`ì˜€ëŠ”ë°, ìì„¸íˆ ì‚´í´ë³´ë©´

```
// InteractionCreate is the data for a InteractionCreate event
type InteractionCreate struct {
	*Interaction
}
```

ì´ë ‡ê²Œ, iì˜ ë©¤ë²„ë³€ìˆ˜ ì¤‘ ê´œì°®ì•„ ë³´ì´ëŠ”, ê·¸ë¦¬ê³  íƒ€ì…ì´ ê°™ì€ `i.Interaction`ë¥¼ ì¸ìë¡œ ë„£ì–´ì¤ë‹ˆë‹¤.

ë‘ ë²ˆì§¸ ì¸ìëŠ” `InteractionResponse`ì˜ í¬ì¸í„° ë³€ìˆ˜ì¸ë°, `Response message data`ë¥¼ ëœ»í•œë‹¤ê³  í•©ë‹ˆë‹¤.

ê·¼ë°, `InteractionResponse` ëŠ” `discordgo`ì˜ `InteractionResponse`ê°€ ê°™ì€ íƒ€ì…ì¸ë°, "í¬ì¸í„°"ë³€ìˆ˜ì´ë‹ˆê¹Œ "ì£¼ì†Œ"ë¡œ ë„˜ê²¨ì¤ì‹œë‹¤.

ê·¸ë¦¬ê³  êµ¬ì¡°ì²´ì´ë‹ˆê¹Œ,

```
// InteractionResponse represents a response for an interaction event.
type InteractionResponse struct {
	Type InteractionResponseType  `json:"type,omitempty"`
	Data *InteractionResponseData `json:"data,omitempty"`
}
```

ì˜ keyì™€ valueë¥¼ ì…ë ¥í•´ ì£¼ëŠ”ë°,

```
Type: discordgo.InteractionResponseChannelMessageWithSource,
Data: &discordgo.InteractionResponseData{
    Content: fmt.Sprintf("ğŸ“ Pong! %dms", ping),
},
```

ì—¬ê¸°ì„œ `discordgo.InteractionResponseChannelMessageWithSource`ëŠ”

```
// InteractionResponseChannelMessageWithSource is for responding with a message, showing the user's input.
InteractionResponseChannelMessageWithSource InteractionResponseType = 4
```

ë¥¼ ì˜ë¯¸í•œë‹¤ê³  í•´ì„œ, "ìœ ì €ì˜ ì¸í’‹ê³¼ ë©”ì„¸ì§€ë¥¼ ì‘ë‹µ"í•´ ì¤€ë‹¤ê³  í•©ë‹ˆë‹¤.

ê·¸ë¦¬ê³ , "Data"ëŠ” í¬ì¸í„°ë¡œ ë˜ì–´ ìˆìœ¼ë‹ˆê¹Œ, "ì£¼ì†Œ"ë¥¼ ë„˜ê²¨ì£¼ê³ ,

`discordgo.InteractionResponseData` ëŠ”

```
// InteractionResponseData is response data for an interaction.
type InteractionResponseData struct {
	TTS             bool                    `json:"tts"`
	Content         string                  `json:"content"`
	Components      []MessageComponent      `json:"components"`
	Embeds          []*MessageEmbed         `json:"embeds"`
	AllowedMentions *MessageAllowedMentions `json:"allowed_mentions,omitempty"`
	Files           []*File                 `json:"-"`
	Attachments     *[]*MessageAttachment   `json:"attachments,omitempty"`
	Poll            *Poll                   `json:"poll,omitempty"`

	// NOTE: only MessageFlagsSuppressEmbeds and MessageFlagsEphemeral can be set.
	Flags MessageFlags `json:"flags,omitempty"`

	// NOTE: autocomplete interaction only.
	Choices []*ApplicationCommandOptionChoice `json:"choices,omitempty"`

	// NOTE: modal interaction only.

	CustomID string `json:"custom_id,omitempty"`
	Title    string `json:"title,omitempty"`
}
```

êµ¬ì¡°ì²´ì¸ë°, ë‹¤ì–‘í•œ ì˜µì…˜ë“¤ì´ ì¡´ì¬í•˜ê³ , ì´ ì¤‘ì—ì„œ Contentë¥¼ ì‚¬ìš©í•´ì„œ ê°€ë³ê²Œ ì¶œë ¥í•³ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

ì´ë•Œ, `fmt.Sprintf()`ë¥¼ ì´ìš©í•´ì„œ ë‹¤ì–‘í•œ íƒ€ì…ë“¤ì„ í¬ë§·ì— ë§ì¶° ë¬¸ìì—´ë¡œ ë„£ì–´ì£¼ê² ìŠµë‹ˆë‹¤.

ê·¼ë°, ë¶„ëª… ContentëŠ” string íƒ€ì…ì´ë¼ë©´ì„œ `fmt.Sprintf()`ë¼ëŠ” í•¨ìˆ˜ë¥¼ ì‚¬ìš©í–ˆë„¤ìš”?

"ì¶œë ¥í•˜ëŠ” í•¨ìˆ˜ ì•„ë‹ˆì•¼?" ë¼ê³  ì˜¤í•´í•  ìˆ˜ ìˆì§€ë§Œ,

```
// Sprintf formats according to a format specifier and returns the resulting string.
func Sprintf(format string, a ...any) string {
```

ì‚¬ì‹¤ìƒ stringìœ¼ë¡œ "ë°˜í™˜"ë§Œ í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤. í¬ë§·íŒ…ëœ ë¬¸ìì—´ì„ ì¶œë ¥í•˜ê¸° ìœ„í•´ì„  ë°˜í™˜ê°’ì„ `fmt.Println()` ë“±ìœ¼ë¡œ ë”°ë¡œ ì¶œë ¥í•´ì•¼ í•©ë‹ˆë‹¤.

ì†”ì§íˆ ì¡°ê¸ˆ ê°„ëµí•˜ê²Œë§Œ ì§šê³  ë„˜ì–´ê°”ëŠ”ë°, ê°‘ìê¸° ì™œ `discordgo`ì—ì„œ ë©¤ë²„ë³€ìˆ˜ë¥¼ ì°¾ì•„ì•¼ í•˜ëŠ”ì§€, ê·¸ëŸ° ê±´ [ì—¬ëŸ¬ ì½”ë“œ](https://github.com/bwmarrin/discordgo)ë¥¼ ë§ì´ ì½ì–´ë´ì•¼ ì•Œ ìˆ˜ ìˆê±°ë‚˜, [ì‚¬ì´íŠ¸](https://pkg.go.dev/github.com/bwmarrin/discordgo)ì—ì„œ ì°¾ì•„ë³´ëŠ” ë°©ë²•ë°–ì— ì—†ìŠµë‹ˆë‹¤.

ì‹¤ì œë¡œ, ìš°ë¦¬ëŠ” ëª¨ë“  ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ì„ ì•”ê¸°í•  ìˆ˜ë„ ì—†ê³ , ê·¸ë ‡ê²Œ í•  ìˆ˜ ìˆëŠ” ë°©ë²•ë„ ì—†ìŠµë‹ˆë‹¤.

í•„ìš”í•  ë•Œ ë§ˆë‹¤ ì§ì ‘ ì°¾ì•„ì„œ ì ìš©í•´ ë³´ëŠ” ë°©ë²•ë°–ì— ì—†ìŠµë‹ˆë‹¤.

ìš”ì¦˜ì—”, AIë„ ë§ì´ ë°œì „ë˜ì–´ ìˆì–´, AIì—ê²Œ ë¬¼ì–´ë³´ëŠ” ë°©ë²•ë„ ë‚˜ì˜ì§€ ì•Šê² ë„¤ìš”.

---

ì´ë ‡ê²Œ ê°„ë‹¨í•˜ê²Œ Ping-Pong ëª…ë ¹ì–´ë¥¼ ë§Œë“œëŠ” ë°©ë²•ì„ ì•Œë ¤ë“œë ¸ëŠ”ë°, ìƒê°ë³´ë‹¤ ë¶„ëŸ‰ì´ ì—„ì²­ë‚˜ë„¤ìš”..ã…œ

(ì €ë²ˆ ë¬¸ì„œë³´ë‹¤ ë” ê¸¸ì–´ì§..ã…‹ã…‹;;;;ã…œã…œã…œã…œã…œ)

ë‹¤ìŒì—ëŠ” ëª…ë ¹ì–´ê°€ ì¶œë ¥ë§Œ í•˜ë©´ ì¬ë¯¸ì—†ìœ¼ë‹ˆ, ì…ë ¥ì„ ë°›ì•„ì„œ ì¶œë ¥í•´ì£¼ëŠ”, ê·¸ë¦¬ê³  ëª…ë ¹ì–´ê°€ 2ê°œ ì´ìƒì¼ ë•ŒëŠ” ì–´ë–»ê²Œ ì²˜ë¦¬í•´ì•¼ í•˜ëŠ”ì§€ë¥¼ ì•Œë ¤ë“œë¦¬ê² ìŠµë‹ˆë‹¤.

ì•„ë§ˆ, ê°„ë‹¨í•˜ê²Œ Ping-Pong ëª…ë ¹ì–´ë¥¼ ë§Œë“œëŠ” ê²ƒë„ ì´ ì •ë„ ë¶„ëŸ‰ì´ì—ˆëŠ”ë°... ë‹¤ìŒ ë¬¸ì„œë„ ì´ ì •ë„ ë¶„ëŸ‰ì´ ë‚˜ì˜¬ ìˆ˜ ìˆì„ ê²ƒ ê°™ì•„ìš”.

ê·¸ë˜ë„, ëê¹Œì§€ ì™„ì£¼í•´ì„œ ë‚˜ë§Œì˜ ë´‡ì„ ë§Œë“¤ì–´ ë´…ì‹œë‹¤!

ë„ì›€ì´ ë˜ì…¨ë‹¤ë©´, Star ë²„íŠ¼ ëˆŒëŸ¬ì£¼ì‹œëŠ” ê±° ìŠì§€ ë§ˆì‹œê³ , ë‚¨ë“¤ì—ê²Œ ë§í¬ ê³µìœ  ë¶€íƒë“œë¦½ë‹ˆë‹¤!

í‹€ë¦° ë‚´ìš©, ë¶€ì¡±í•œ ë‚´ìš© ìˆë‹¤ë©´ í˜¼ì ë‚„ë‚„ê±°ë¦¬ê³ , ë‚¨ë“¤ì—ê²Œ ì˜¤ê°œë… ê°œë§ë‹¤ê³  ìë‘(?)í•˜ì‹œì§€ ë§ˆì‹œê³ , ì €ì—ê²Œ ì•Œë ¤ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤.

ê°ì‚¬í•©ë‹ˆë‹¤.